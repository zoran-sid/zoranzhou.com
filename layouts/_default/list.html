{{ define "main" }}

  {{/* 如果是首页，就显示 profile 内容 + 文章列表 */}}
  {{ if .IsHome }}
    <div class="home-profile">
      {{/* 假设你把自我介绍放在 content/_index.md 中 */}}
      {{ .Content }}
    </div>
  {{ end }}

  {{/* 文章列表逻辑 */}}
  {{ $pages := .Pages }}
  {{ if .IsHome }}
    {{ $pages = where site.RegularPages "Section" "in" site.Params.mainSections }}
  {{ end }}
  {{ $pages = where $pages "Params.hidden" "!=" true }}

  {{ $paginator := .Paginate $pages (site.Params.paginate | default 10) }}

  <div class="post-list">
    {{ range $page := $paginator.Pages }}
      <article class="post-item">
        <header class="post-item-header">
          <h2><a href="{{ $page.Permalink }}">{{ $page.Title }}</a></h2>
        </header>
        <div class="post-item-meta">
          <time datetime="{{ $page.Date.Format "2006-01-02" }}">{{ $page.Date.Format "Jan 2, 2006" }}</time>
          {{ with $page.Params.tags }}
            · Tags:
            {{ range $i, $t := . }}
              <a href="{{ "/tags/" | relURL }}{{ $t | urlize }}">{{ $t }}</a>{{ if lt (add $i 1) (len .) }}, {{ end }}
            {{ end }}
          {{ end }}
          {{ if $page.ReadingTime }}
            · {{ $page.ReadingTime }} min read
          {{ end }}
        </div>
      </article>
    {{ end }}
  </div>

  {{ if gt $paginator.TotalPages 1 }}
    <footer class="pagination">
      {{ if $paginator.HasPrev }}<a class="prev" href="{{ $paginator.Prev.URL | absURL }}">« Prev</a>{{ end }}
      {{ if $paginator.HasNext }}<a class="next" href="{{ $paginator.Next.URL | absURL }}">Next »</a>{{ end }}
    </footer>
  {{ end }}

{{ end }}
