{{ define "main" }}
<div class="wrapper post">
  <main class="page-content" aria-label="Content">
    <article>

      <!-- 标题与时间 -->
      <header class="header">
        <h1 class="header-title">{{ .Title }}</h1>

        {{ $configDateFormat := .Site.Params.dateFormat | default ":date_medium" }}
        {{ with .Date }}
        {{ $ISO_time := dateFormat "2006-01-02T15:04:05-07:00" . }}
        <div class="post-meta">
          <time datetime="{{ $ISO_time }}" itemprop="datePublished">
            {{ . | time.Format $configDateFormat }}
          </time>
        </div>
        {{ end }}
      </header>

      <!-- TOC -->
      {{ partial "toc.html" . }}

      <!-- 正文内容 -->
      <div class="page-content">
        {{ .Content }}
      </div>

      <!-- 评论区挂载点 -->
      <div id="waline" style="margin-top: 2rem;"></div>

    </article>
  </main>
</div>

<!-- Waline CSS -->
<link rel="stylesheet"
  href="https://unpkg.com/@waline/client@v3/dist/waline.css" />

<!-- Waline JS -->
<script type="module">
  import { init } from 'https://unpkg.com/@waline/client@v3/dist/waline.js';

  init({
    el: '#waline',
    serverURL: 'https://zoranzhou.cn',  // ← 这是你的 Waline 后端
    lang: 'zh-CN',
    comment: true,
    pageview: true,
  });
</script>

{{ end }}
